pipeline {
    agent any
    stages {
        stage('build') {
            steps {
              sh './gradlew clean build'
            }
        }
        stage('docker build'){
            steps{
              env.TAG=sh(script: "TZ=Asia/Seoul date +%Y.%m.%d.%H%M", returnStdout:true).trim();
              sh 'docker build -t nexus.abc.com:${TAG} .'
            }
        }
    }
}